<!-- Function to show the confirmation popup for the delete button -->
{% block confirmation_popup %}
<script>
function showConfirmationPopup(event) {
    event.preventDefault(); // Prevent the default link behavior

    const confirmationMessage = 'Are you sure you want to delete this task?';
    const confirmationPopup = document.createElement('div');
    confirmationPopup.className = 'confirmation-popup';

    const messageElement = document.createElement('div');
    messageElement.textContent = confirmationMessage;
    confirmationPopup.appendChild(messageElement);

    const okButton = document.createElement('button');
    okButton.textContent = 'OK';
    okButton.className = 'btn btn-success btn-sm me-2';
    okButton.onclick = function () {
        // When the OK button is clicked, proceed with the task deletion
        window.location.href = event.target.href;
    };
    confirmationPopup.appendChild(okButton);

    const cancelButton = document.createElement('button');
    cancelButton.textContent = 'Cancel';
    cancelButton.className = 'btn btn-danger btn-sm';
    cancelButton.onclick = function () {
        // When the Cancel button is clicked, remove the confirmation popup
        confirmationPopup.remove();
    };
    confirmationPopup.appendChild(cancelButton);

    // Position the confirmation popup near the mouse click
    const x = event.clientX;
    const y = event.clientY - 100; // Adjust the number of pixels as needed
    confirmationPopup.style.position = 'fixed';
    confirmationPopup.style.top = y + 'px';
    confirmationPopup.style.left = x + 'px';

    // Add the confirmation popup to the document
    document.body.appendChild(confirmationPopup);

    // Return false to prevent the default browser link action
    return false;
}

// Function to show the confirmation popup for the "Reset ALL Tasks" button
function showResetConfirmationPopup(event) {
    // Remove event.preventDefault(); to allow form submission
    const confirmationMessage = 'Are you sure you want to delete all tasks? This action cannot be undone!';
    const confirmationPopup = document.createElement('div');
    confirmationPopup.className = 'confirmation-popup confirmation-popup-red'; // Added class for red background

    const messageElement = document.createElement('div');
    messageElement.textContent = confirmationMessage;
    confirmationPopup.appendChild(messageElement);

    const okButton = document.createElement('button');
    okButton.textContent = 'OK';
    okButton.className = 'btn btn-success btn-sm me-2';
    okButton.onclick = function () {
        // When the OK button is clicked, proceed with the task reset by submitting the form
        event.target.form.submit(); // Submit the form to reset tasks
    };
    confirmationPopup.appendChild(okButton);

    const cancelButton = document.createElement('button');
    cancelButton.textContent = 'Cancel';
    cancelButton.className = 'btn btn-danger btn-sm';
    cancelButton.onclick = function () {
        // When the Cancel button is clicked, remove the confirmation popup
        confirmationPopup.remove();
    };
    confirmationPopup.appendChild(cancelButton);

    // Position the confirmation popup near the mouse click
    const x = event.clientX;
    const y = event.clientY - 100; // Adjust the number of pixels as needed
    confirmationPopup.style.position = 'fixed';
    confirmationPopup.style.top = y + 'px';
    confirmationPopup.style.left = x + 'px';

    // Add the confirmation popup to the document
    document.body.appendChild(confirmationPopup);

    // Return false to prevent the default form submission
    return false;
}
</script>
{% endblock confirmation_popup %}
